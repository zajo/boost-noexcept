<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Lightweight error handling without exceptions for C++11">
<title>Noexcept</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Noexcept</h1>
<div class="details">
<span id="author" class="author">Lightweight error handling without exceptions for C++11</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_license">License</a></li>
<li><a href="#_feedback_support">Feedback / support</a></li>
<li><a href="#design_rationale">Design rationale</a></li>
<li><a href="#guarantee">No error gets ignored guarantee</a></li>
<li><a href="#_crash_course">Crash course</a>
<ul class="sectlevel2">
<li><a href="#example_FILE">Handling <code>FILE</code> errors</a></li>
<li><a href="#example_ifstream">Handling <code>std::ifstream</code> errors</a></li>
<li><a href="#example_lua">Propagating errors across Lua functions</a></li>
<li><a href="#example_optional">Using <code>optional&lt;&gt;</code> as a return type</a></li>
</ul>
</li>
<li><a href="#_synopsis">Synopsis</a>
<ul class="sectlevel2">
<li><a href="#_boost_noexcept_hpp">boost/noexcept.hpp</a></li>
<li><a href="#_boost_noexcept_throw_hpp">boost/noexcept/throw.hpp</a></li>
<li><a href="#_boost_noexcept_try_hpp">boost/noexcept/try.hpp</a></li>
</ul>
</li>
<li><a href="#_reference">Reference</a>
<ul class="sectlevel2">
<li><a href="#throw_">Report: <code>throw_</code></a>
<ul class="sectlevel3">
<li><a href="#throw_ctor">throw_ constructors</a></li>
<li><a href="#throw_operator_T">throw_::operator T()</a></li>
<li><a href="#has_current_error">has_current_error()</a></li>
</ul>
</li>
<li><a href="#try_">Handle: <code>try_</code>/<code>catch_</code></a>
<ul class="sectlevel3">
<li><a href="#result_dtor">result&lt;T&gt; destructor</a></li>
<li><a href="#result_has_error">result&lt;T&gt;::has_error()</a></li>
<li><a href="#result_has_unhandled_error">result&lt;T&gt;::has_unhandled_error()</a></li>
<li><a href="#result_operator_bool">result&lt;T&gt;::operator bool()</a></li>
<li><a href="#catch_">result&lt;T&gt;::catch_()</a></li>
<li><a href="#result_throw_">result&lt;T&gt;::throw_()</a></li>
<li><a href="#result_throw_exception">result&lt;T&gt;::throw_exception()</a></li>
<li><a href="#result_get">result&lt;T&gt;::get()</a></li>
<li><a href="#result_try_">try_()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#programming_techniques">Programming techniques and guidelines</a>
<ul class="sectlevel2">
<li><a href="#_selecting_optimal_function_return_types">Selecting optimal function return types</a></li>
<li><a href="#_enforcing_successful_control_flow">Enforcing successful control flow</a></li>
<li><a href="#_automatically_returning_early_in_case_of_a_failure_in_a_sequence_of_function_calls">Automatically returning early in case of a failure in a sequence of function calls</a></li>
<li><a href="#_obtaining_diagnostic_information_from_unknown_errors">Obtaining diagnostic information from unknown errors</a></li>
<li><a href="#_augmenting_error_objects_in_error_neutral_contexts">Augmenting error objects in error-neutral contexts</a></li>
<li><a href="#example_threads">Passing "value-or-error" between threads using <code>result&lt;T&gt;</code></a></li>
</ul>
</li>
<li><a href="#configuration">Macros and configuration</a></li>
<li><a href="#alternatives">Alternatives to Noexcept</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#qanda">Q&amp;A</a></li>
<li><a href="#_download">Download</a></li>
<li><a href="#_building_and_installation">Building and installation</a></li>
<li><a href="#_building_the_unit_tests_and_the_examples">Building the unit tests and the examples</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Noexcept is small and efficient C++11 error-handling library which does not use exception handling and does not require exception-safe environment. Some of its features are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Function return values are not burdened with transporting error objects in case of a failure.</p>
</li>
<li>
<p>Errors can be identified by error code <em>values</em> (including <code>std::error_code</code>), or by static <em>types</em> if type safety is desired.</p>
</li>
<li>
<p>Error-neutral contexts can forward to the caller any error condition detected in lower level functions, without touching the error object.</p>
</li>
<li>
<p>Error-handling contexts may selectively handle some errors but remain neutral to others.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because Noexcept is not intrusive to function return types, it is able to propagate failures even across third-party code which may not be able to use specific sophisticated error-reporting types. This makes Noexcept deployable even in tricky use cases where a more intrusive error handling mechanism could not be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When errors are reported from a C-style callback, or</p>
</li>
<li>
<p>from a C++ virtual function override when deriving from a third-party base type.</p>
</li>
<li>
<p>When reported errors need to cross multiple API levels, each with their own error reporting mechanism.</p>
</li>
<li>
<p>When reported errors need to cross programming language boundaries.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Distributed under the <a href="http://www.boost.org/LICENSE_1_0.txt">Boost Software License, Version 1.0</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Noexcept is not part of Boost.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_feedback_support">Feedback / support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please use the <a href="https://lists.boost.org/mailman/listinfo.cgi/boost">Boost Developers mailing list</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design_rationale">Design rationale</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Functions which could fail (except if they use exception handling) must communicate the failure directly to the caller&#8201;&#8212;&#8201;but they also need to be able to return a value in case of success.</p>
</div>
<div class="paragraph">
<p>This naturally leads designers of error-handling libraries to creating a special return type capable of transporting any value or any error, with two design goals:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Zero abstraction penalty, at the very least in the case the function succeeds.</p>
</li>
<li>
<p>Flexibility to transport a wide range of error objects and data pertaining to error conditions.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The problem is that these are competing goals&#8201;&#8212;&#8201;which would force us into a compromise, the victim <em>probably</em> being the flexibility of the error-transporting facilities. This is not ideal for an error handling library.</p>
</div>
<div class="paragraph">
<p>In addition, such design would lead to problems specific to C and C++:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is intrusive, so it couldn&#8217;t be used in many practical cases, for example when reporting errors from a C callback.</p>
</li>
<li>
<p>C++ programmers do not even agree on what string type they should use, so interoperability between the different parts of a large program is going to be a problem.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For these reasons, Noexcept does not define a special return type. Programmers may use any type whatsoever, the only requirement is that it provides a special state&#8201;&#8212;&#8201;a value that can be returned in case of a failure. As a bonus, this virtually eliminates the chance of Noexcept impacting the performance of passing values up the call chain.</p>
</div>
<div class="paragraph">
<p>When a failure is detected, the error object is created in thread-local storage rather than passed up one level at a time. It is destroyed when control reaches an error-handling function that recognizes it and recovers from the failure.</p>
</div>
<div class="paragraph">
<p>Further rationale for using TLS for transporting error objects is that errors are semantically very different from successful results. In a typical program, there may be very many results of different types produced, transformed, processed, used in different computations and algorithms, passed up and down the call chain. In contrast, the path taken by an error object is much simpler&#8201;&#8212;&#8201;and it is (mostly, sometimes even exclusively) of interest to only two contexts: the function that detects and reports the error, and the function which recognizes it and is able to handle it. For that reason, it makes sense to push errors to the side, so they are less intrusive yet still available for access if needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For a comparison between various error-reporting libraries and proposals, see <a href="#alternatives">Alternatives to Noexcept</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guarantee">No error gets ignored guarantee</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Noexcept will never ignore an error once it is reported. The handling of any given error may be postponed (e.g. using <code><a href="#try_">result&lt;T&gt;</a></code>), but eventually the program is required to recognize each and every error object and flag it as handled. Situations which would lead to a pending error being ignored are detected and result in a call to <code>std::terminate</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_crash_course">Crash course</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="example_FILE">Handling <code>FILE</code> errors</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;system_error&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="directive">using</span> <span class="keyword">namespace</span> boost::noexcept_;

FILE * open_file( <span class="predefined-type">char</span> <span class="directive">const</span> * name ) noexcept {
    <span class="keyword">if</span>( FILE * f=fopen(name,<span class="string"><span class="delimiter">&quot;</span><span class="content">rb</span><span class="delimiter">&quot;</span></span>) )
        <span class="keyword">return</span> f;
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( std::error_code { errno, std::generic_category() } );  <i class="conum" data-value="1"></i><b>(1)</b>
}

<span class="predefined-type">int</span> main() {
    <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(open_file(<span class="string"><span class="delimiter">&quot;</span><span class="content">file_name</span><span class="delimiter">&quot;</span></span>)) ) {  <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="comment">//Success! Get the FILE pointer:</span>
        FILE * f=r.get();
        <span class="comment">//Use the file, then close it</span>
        fclose(f);
    } <span class="keyword">else</span> <span class="keyword">if</span>( std::error_code * err=r.catch_&lt;std::error_code&gt;() ) {  <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="comment">//The file failed to open! Handle error.</span>
    }  <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If an error is detected, <code><a href="#throw_">throw_</a></code> associates the passed <code>std::error_code</code> object with the calling thread and converts to a <code>0</code> <code>FILE *</code> for the return value (as specified by the <code><a href="#throw_">throw_return</a></code> template).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code><a href="#try_">try_</a></code> checks for success and moves the return value of <code>open_file</code> (or the error it passed to <code>throw_</code>) into <code>r</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code><a href="#catch_">catch_</a></code> returns a pointer to the error object (or <code>0</code> if it is not a <code>std::error_code</code>) and flags it as handled.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>When <code>r</code> is destroyed, the error object is destroyed if handled, otherwise left intact for another <code>try_</code>/<code>catch_</code> up the call chain to handle.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If unhandled errors remain at the time the current thread terminates, Noexcept calls <code>std::terminate()</code>. Use the default for the <code>catch_&lt;&gt;</code> function template to handle any error regardless of its type.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="example_ifstream">Handling <code>std::ifstream</code> errors</h3>
<div class="paragraph">
<p>This program shows how to use Noexcept with <code>std::ifstream</code>, and demonstrates the use of <code>BOOST_NOEXCEPT_CHECK</code> in error-neutral functions (see <a href="#programming_techniques">Programming techniques and guidelines</a> for details).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;fstream&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;string&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;iostream&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;system_error&gt;</span>

<span class="directive">using</span> <span class="keyword">namespace</span> boost::noexcept_;

std::ifstream open_stream( <span class="predefined-type">char</span> <span class="directive">const</span> * name ) noexcept {
    std::ifstream f(name);
    <span class="keyword">if</span>( f.good() )
        <span class="keyword">return</span> f;  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( std::error_code{ errno, std::generic_category() } );  <i class="conum" data-value="1"></i><b>(1)</b>
}

std::<span class="predefined-type">string</span> read_line( std::ifstream &amp;&amp; f ) noexcept {
    BOOST_NOEXCEPT_CHECK
    assert(f.good());  <i class="conum" data-value="2"></i><b>(2)</b>
    std::<span class="predefined-type">string</span> s;
    getline(f,s);
    <span class="keyword">if</span>( f.good() )
        <span class="keyword">return</span> s;  <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( std::error_code{ errno, std::generic_category() } );  <i class="conum" data-value="3"></i><b>(3)</b>
}

std::<span class="predefined-type">string</span> read_string_from_file( <span class="predefined-type">char</span> <span class="directive">const</span> * name ) noexcept {
    <span class="keyword">return</span> read_line(open_stream(name));  <i class="conum" data-value="4"></i><b>(4)</b>
}

<span class="predefined-type">int</span> main() {
    <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(read_string_from_file(<span class="string"><span class="delimiter">&quot;</span><span class="content">test.txt</span><span class="delimiter">&quot;</span></span>)) ) {
        <span class="comment">//Success!</span>
        std::cout &lt;&lt; r.get() &lt;&lt; <span class="char">'\n'</span>;
        <span class="keyword">return</span> <span class="integer">0</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;std::error_code&gt;() ) {  <i class="conum" data-value="5"></i><b>(5)</b>
        std::cerr &lt;&lt; err-&gt;message();
    } <span class="comment">/*else {  <i class="conum" data-value="6"></i><b>(6)</b>
        std::cerr &lt;&lt;
            &quot;Unhandled error reached main!\n&quot;
            &quot;Diagnostic information below:\n&quot; &lt;&lt;
            boost::diagnostic_information(*r.catch_&lt;&gt;());
    }*/</span>
    <span class="keyword">return</span> <span class="integer">1</span>;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>open_stream</code> returns a "good" <code>ifstream</code> or <code>std::error_code</code> (the <code>throw_</code> converts to an empty <code>ifstream</code>, as specified by the <code><a href="#throw_">throw_return</a></code> template).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>BOOST_NOEXCEPT_CHECK</code> (on the previous line) would immediately return any pending errors to the caller using <code>return throw_()</code>, so here we can <code>assert(f.good())</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>read_line</code> function returns a <code>string</code> or another <code>std::error_code</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Thanks to the <code>BOOST_NOEXCEPT_CHECK</code> in <code>read_line</code>, here we don&#8217;t need to check for errors: any success or failure reported by <code>read_line</code> or <code>open_stream</code> will be propagated automatically.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Dispatch on known errors and print the appropriate message.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The commented-out section shows how <code><a href="http://www.boost.org/doc/libs/release/libs/exception/doc/diagnostic_information.html">boost::diagnostic_information</a>()</code> could be used by a more complex program to report that <code>main()</code> could not recognize an error object that reached it.</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="example_lua">Propagating errors across Lua functions</h3>
<div class="paragraph">
<p>This program demonstrates that errors reported by Noexcept survive intact across API and even programming language boundaries. From C++, it calls a <a href="http://www.lua.org/">Lua</a> function, which calls back a C++ function. If the callback C++ function fails, the error is propagated all the way to <code>main()</code> where it is handled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">extern</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span> {
    <span class="preprocessor">#include</span> <span class="include">&quot;lua.h&quot;</span>
    <span class="preprocessor">#include</span> <span class="include">&quot;lauxlib.h&quot;</span>
}
<span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;iostream&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;stdlib.h&gt;</span>

<span class="directive">using</span> <span class="keyword">namespace</span> boost::noexcept_;

<span class="keyword">struct</span> do_work_error { };
<span class="predefined-type">int</span> do_work( lua_State * L ) noexcept;

std::shared_ptr&lt;lua_State&gt; init_lua_state() noexcept {  <i class="conum" data-value="1"></i><b>(1)</b>
    std::shared_ptr&lt;lua_State&gt; L(lua_open(),&amp;lua_close);
    luaL_dostring( &amp;*L, <span class="string"><span class="delimiter">&quot;</span><span class="char">\
</span><span class="char">\n</span><span class="content">      function call_do_work()</span><span class="char">\
</span><span class="char">\n</span><span class="content">          return do_work()</span><span class="char">\
</span><span class="char">\n</span><span class="content">      end</span><span class="delimiter">&quot;</span></span> );
    lua_register( &amp;*L, <span class="string"><span class="delimiter">&quot;</span><span class="content">do_work</span><span class="delimiter">&quot;</span></span>, &amp;do_work );
    <span class="keyword">return</span> L;
}

<span class="predefined-type">int</span> do_work( lua_State * L ) noexcept {
    <span class="predefined-type">bool</span> success=rand()%<span class="integer">2</span>;
    <span class="keyword">if</span>( success )
        <span class="keyword">return</span> lua_pushnumber(L,<span class="integer">42</span>), <span class="integer">1</span>;  <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_(do_work_error()), lua_error(L);  <i class="conum" data-value="3"></i><b>(3)</b>
}

<span class="predefined-type">int</span> call_lua( lua_State * L ) noexcept {  <i class="conum" data-value="4"></i><b>(4)</b>
    lua_getfield( L, LUA_GLOBALSINDEX, <span class="string"><span class="delimiter">&quot;</span><span class="content">call_do_work</span><span class="delimiter">&quot;</span></span> );
    <span class="keyword">if</span>( <span class="predefined-type">int</span> err=lua_pcall(L,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>) ) {
        lua_pop(L,<span class="integer">1</span>);
        <span class="keyword">return</span> throw_();
    }
    <span class="keyword">else</span> {
        <span class="predefined-type">int</span> answer=lua_tonumber(L,-<span class="integer">1</span>);
        lua_pop(L,<span class="integer">1</span>);
        <span class="keyword">return</span> answer;
    }
}

<span class="predefined-type">int</span> main() {
    std::shared_ptr&lt;lua_State&gt; L=init_lua_state();
    <span class="keyword">for</span>( <span class="predefined-type">int</span> i=<span class="integer">0</span>; i!=<span class="integer">10</span>; ++i ) {
        <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(call_lua(&amp;*L)) )
            std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">do_work succeeded, answer=</span><span class="delimiter">&quot;</span></span> &lt;&lt; r.get() &lt;&lt; <span class="char">'\n'</span>;
        <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;do_work_error&gt;() )  <i class="conum" data-value="5"></i><b>(5)</b>
            std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">do_work failed!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Initialize the Lua interpreter and define a simple Lua function (provided as a C string literal) called <code>call_do_work</code>, which simply returns the value returned by the Lua-global <code>do_work</code> function, which is a C++ function.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In the C++ <code>do_work</code> function, in case of success we return <code>42</code> back to Lua.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In case of a failure, we pass <code>do_work_error</code> to <code>throw_</code> as usual, and call <code>lua_error</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>call_lua</code> function instructs the Lua interpreter to execute the <code>call_do_work</code> Lua function (which calls <code>do_work</code>). If <code>do_work</code> was successful, <code>call_lua</code> returns the answer; otherwise it forwards failures by <code>return throw_()</code>, as usual.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>In case <code>do_work</code> fails, the reported error object (which at this point has been propagated from C++, through Lua and back into C++) is handled here.</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="example_optional">Using <code>optional&lt;&gt;</code> as a return type</h3>
<div class="paragraph">
<p>This program demonstrates that Noexcept is compatible with <code>optional&lt;&gt;</code>, which is handy when we need a return value with an explicit empty state.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;boost/optional.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;stdlib.h&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;iostream&gt;</span>

<span class="directive">using</span> <span class="keyword">namespace</span> boost::noexcept_;

<span class="comment">//A C function which may fail, returning different error codes</span>
<span class="directive">extern</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span> {
    <span class="preprocessor">#define</span> ERRATIC_ERROR_FOO <span class="integer">1</span>
    <span class="preprocessor">#define</span> ERRATIC_ERROR_BAR <span class="integer">2</span>

    <span class="predefined-type">int</span> erratic( <span class="predefined-type">float</span> * answer ) {  <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">switch</span>( rand() % <span class="integer">3</span> ) {
            <span class="keyword">default</span>: *answer=<span class="integer">42</span>; <span class="keyword">return</span> <span class="integer">0</span>;
            <span class="keyword">case</span> <span class="integer">1</span>: <span class="keyword">return</span> ERRATIC_ERROR_FOO;
            <span class="keyword">case</span> <span class="integer">2</span>: <span class="keyword">return</span> ERRATIC_ERROR_BAR;
        }
    }
}

<span class="keyword">struct</span> erratic_error { <span class="predefined-type">int</span> error_code; };  <i class="conum" data-value="2"></i><b>(2)</b>

boost::optional&lt;<span class="predefined-type">float</span>&gt; erratic_caller() noexcept {  <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="predefined-type">float</span> answer;
    <span class="keyword">if</span>( <span class="predefined-type">int</span> err=erratic(&amp;answer) )
        <span class="keyword">return</span> throw_(erratic_error{err});
    <span class="keyword">else</span>
        <span class="keyword">return</span> answer;
}

<span class="predefined-type">int</span> main() {
    <span class="keyword">for</span>( <span class="predefined-type">int</span> i=<span class="integer">0</span>; i!=<span class="integer">10</span>; ++i )
        <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(erratic_caller()) )  <i class="conum" data-value="4"></i><b>(4)</b>
            std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Answer: </span><span class="delimiter">&quot;</span></span> &lt;&lt; r.get().value() &lt;&lt; std::endl;
        <span class="keyword">else</span> <span class="keyword">if</span>( erratic_error <span class="directive">const</span> * err = r.catch_&lt;erratic_error&gt;() )  <i class="conum" data-value="5"></i><b>(5)</b>
            std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">FAILED! error code=</span><span class="delimiter">&quot;</span></span> &lt;&lt; err-&gt;error_code &lt;&lt; std::endl;
        <span class="keyword">else</span>
            assert(<span class="integer">0</span>);
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A C function which uses <code>int</code> status codes to indicate success or failure, and a <code>float</code> pointer to store the result.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A simple error type to report failures from the C API function.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The cumbersome <code>float</code> pointer interface of the <code>C</code> function is converted to <code>boost::optional&lt;float&gt;</code>. The <code><a href="#throw_">throw_</a></code> returns an empty <code>optional</code> in case of failure (as specified by the <code><a href="#throw_return">throw_return</a></code> template).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code><a href="#try_">try_</a></code> both checks for success and moves the return value of <code>erratic_caller</code> into <code>r</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code><a href="#catch_">catch_</a></code> returns a pointer to the error object (or <code>0</code> if it can not be converted to <code>erratic_error</code>) and flags it as handled.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">Synopsis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_boost_noexcept_hpp">boost/noexcept.hpp</h3>
<div class="listingblock">
<div class="title">#include &lt;boost/noexcept.hpp&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept/throw.hpp&gt;</span>
<span class="preprocessor">#include</span> <span class="include">&lt;boost/noexcept/try.hpp&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boost_noexcept_throw_hpp">boost/noexcept/throw.hpp</h3>
<div class="listingblock">
<div class="title">#include &lt;boost/noexcept/throw.hpp&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> noexcept_ {

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    <span class="keyword">struct</span> throw_return {

        <span class="directive">static</span> T value() noexcept;

    }

    <span class="keyword">class</span> <span class="class">throw_</span> {

        throw_( throw_ <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;
        throw_ &amp; <span class="directive">operator</span>=( throw_ <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;

        <span class="directive">public</span>:

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
        throw_( E &amp;&amp; e ) noexcept;

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
        throw_( E &amp;&amp; e, <span class="predefined-type">char</span> <span class="directive">const</span> * file, <span class="predefined-type">int</span> line, <span class="predefined-type">char</span> <span class="directive">const</span> * function ) noexcept;

        throw_() noexcept { }

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
        <span class="directive">operator</span> T() noexcept;

    };

    <span class="predefined-type">bool</span> has_current_error() noexcept;

} }

<span class="preprocessor">#define</span> THROW_(e)\
    ::boost::noexcept::throw_(e,__FILE__,__LINE__,BOOST_CURRENT_FUNCTION)

<span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span> ::boost::noexcept_::throw_(); }

<span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK_VOID\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span>; }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boost_noexcept_try_hpp">boost/noexcept/try.hpp</h3>
<div class="listingblock">
<div class="title">#include &lt;boost/noexcept/try.hpp&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> noexcept_ {

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    <span class="keyword">class</span> <span class="class">result</span> {

        result( result <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;
        result &amp; <span class="directive">operator</span>=( result <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;

        <span class="directive">public</span>:

        ~result() noexcept;

        <span class="predefined-type">bool</span> has_error() <span class="directive">const</span> noexcept;
        <span class="predefined-type">bool</span> has_unhandled_error <span class="directive">const</span> noexcept;

        <span class="directive">explicit</span> <span class="directive">operator</span> <span class="predefined-type">bool</span>() <span class="directive">const</span> noexcept;

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>=std::exception&gt;
        E * catch_() noexcept;

        &lt;unspecified_return_type&gt; throw_() noexcept;

        <span class="directive">void</span> throw_exception();

        T <span class="directive">const</span> &amp; get() <span class="directive">const</span>;
        T &amp; get();

    };

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    result&lt;T&gt; try_( T &amp;&amp; res ) noexcept;

    result&lt;<span class="directive">void</span>&gt; current_error() noexcept;

} }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference">Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="throw_">Report: <code>throw_</code></h3>
<div id="throw_return" class="listingblock">
<div class="title">#include &lt;boost/noexcept/throw.hpp&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> noexcept_ {

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    <span class="keyword">struct</span> throw_return {

        <span class="directive">static</span> T value() noexcept;

    }

    <span class="keyword">class</span> <span class="class">throw_</span> {

        throw_( throw_ <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;
        throw_ &amp; <span class="directive">operator</span>=( throw_ <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;

        <span class="directive">public</span>:

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
        throw_( E &amp;&amp; e ) noexcept;

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
        throw_( E &amp;&amp; e, <span class="predefined-type">char</span> <span class="directive">const</span> * file, <span class="predefined-type">int</span> line, <span class="predefined-type">char</span> <span class="directive">const</span> * function ) noexcept;

        throw_() noexcept { }

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
        <span class="directive">operator</span> T() noexcept;

    };

    <span class="predefined-type">bool</span> has_current_error() noexcept;

} }

<span class="preprocessor">#define</span> THROW_(e)\
    ::boost::noexcept::throw_(e,__FILE__,__LINE__,BOOST_CURRENT_FUNCTION)

<span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span> ::boost::noexcept_::throw_(); }

<span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK_VOID\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>throw_</code> is a utility class designed to be used in <code>return</code> expressions to indicate failure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">return</span> throw_( my_error() );</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">return</span> throw_( std::error_code { <span class="integer">42</span>, my_domain } );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The passed object becomes the current error for the calling thread. The error remains current until captured into a <code><a href="#try_">result</a></code> object (see <code><a href="#try_">try_</a></code>). For threads that have a current error, <code><a href="#has_current_error">has_current_error</a>()</code> returns <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The <code>throw_</code> object itself converts to any type so it can be used in <code>return</code> expressions in any function: if the function return type is <code>T</code>, the returned value is <code>throw_return&lt;T&gt;::value()</code>.</p>
</div>
<div class="paragraph">
<p>The <code>throw_return&lt;T&gt;</code> template may be specialized to specify the value to be returned to the caller when <code>throw_</code> is used to report a failure. The main template is defined such that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>T</code> is not <code>bool</code> and <code>std::is_integral&lt;T&gt;::value</code> is <code>true</code>, then <code>throw_return&lt;T&gt;::value()</code> returns <code>static_cast&lt;T&gt;(-1)</code>.</p>
</li>
<li>
<p>Otherwise the it returns <code>T()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>throw_</code> class has the following members:</p>
</div>
<hr>
<div class="sect3">
<h4 id="throw_ctor">throw_ constructors</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
throw_( E &amp;&amp; e ) noexcept;

<span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>&gt;
throw_( E &amp;&amp; e, <span class="predefined-type">char</span> <span class="directive">const</span> * file, <span class="predefined-type">int</span> line, <span class="predefined-type">char</span> <span class="directive">const</span> * function ) noexcept;

<span class="preprocessor">#define</span> THROW_(e)\
    ::boost::noexcept::throw_(e,__FILE__,__LINE__,BOOST_CURRENT_FUNCTION)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Preconditions: </dt>
<dd>
<p><code>!<a href="#has_current_error">has_current_error</a>()</code></p>
</dd>
<dt class="hdlist1">Effects: </dt>
<dd>
<p><code>e</code> becomes the current error for the calling thread. If <code>file</code>, <code>line</code> and <code>function</code> are specified, that information is recorded for diagnostic purposes (use with the <code>THROW_</code> macro).</p>
</dd>
<dt class="hdlist1">Postconditions: </dt>
<dd>
<p><code>has_current_error()</code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">throw_() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Effects: </dt>
<dd>
<p>None: the default constructor is used to continue propagating the current error.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is different from the <code><a href="#result_throw_">throw_</a></code> member function of <code>result&lt;T&gt;</code>, which is used in return expressions to propagate the error stored in the <code>result</code> object, rather than the current error.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="throw_operator_T">throw_::operator T()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
<span class="directive">operator</span> T() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Preconditions: </dt>
<dd>
<p><code><a href="#has_current_error">has_current_error</a>()</code></p>
</dd>
<dt class="hdlist1">Returns: </dt>
<dd>
<p><code>throw_return&lt;T&gt;::value()</code>.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="has_current_error">has_current_error()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> has_current_error() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Returns: </dt>
<dd>
<p>If <code><a href="#throw_">throw_</a></code> was used to set the current error for the calling thread, and if that error has not been captured by a <code><a href="#try_">result</a></code> object (see <code><a href="#try_">try_</a></code>), <code>has_current_error</code> returns <code>true</code>. Otherwise it returns <code>false</code>.</p>
</dd>
</dl>
</div>
<hr>
<div id="BOOST_NOEXCEPT_CHECK" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span> ::boost::noexcept_::throw_(); }

<span class="preprocessor">#define</span> BOOST_NOEXCEPT_CHECK_VOID\
    { <span class="keyword">if</span>( ::boost::noexcept_::has_current_error() )\
        <span class="keyword">return</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>These macros are designed to be used right after the opening <code>{</code> of a function to return immediately in case previous operations have resulted in an error. Please see <a href="#programming_techniques">Programming techniques and guidelines</a> for a motivating example.</p>
</div>
<div class="paragraph">
<p><br></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="try_">Handle: <code>try_</code>/<code>catch_</code></h3>
<div class="listingblock">
<div class="title">#include &lt;boost/noexcept/try.hpp&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> noexcept_ {

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    <span class="keyword">class</span> <span class="class">result</span> {

        result( result <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;
        result &amp; <span class="directive">operator</span>=( result <span class="directive">const</span> &amp; )=<span class="keyword">delete</span>;

        <span class="directive">public</span>:

        ~result() noexcept;

        <span class="predefined-type">bool</span> has_error() <span class="directive">const</span> noexcept;
        <span class="predefined-type">bool</span> has_unhandled_error <span class="directive">const</span> noexcept;

        <span class="directive">explicit</span> <span class="directive">operator</span> <span class="predefined-type">bool</span>() <span class="directive">const</span> noexcept;

        <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>=std::exception&gt;
        E * catch_() noexcept;

        &lt;unspecified_return_type&gt; throw_() noexcept;

        <span class="directive">void</span> throw_exception();

        T <span class="directive">const</span> &amp; get() <span class="directive">const</span>;
        T &amp; get();

    };

    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
    result&lt;T&gt; try_( T &amp;&amp; res ) noexcept;

    result&lt;<span class="directive">void</span>&gt; current_error() noexcept;

} }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pass a function return value directly to <code>try_</code> (or use <code>current_error()</code> in the case of void functions) if you want to <em>handle</em> the errors it could report:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the function was successful (<code>has_current_error()</code> is <code>false</code>), use the <code><a href="#result_get">get</a></code> member function of the returned <code>result&lt;T&gt;</code> object to obtain the returned value.</p>
</li>
<li>
<p>Otherwise instead of storing a <code>T</code> result, the returned <code>result&lt;T&gt;</code> object captures the current error, which leaves the calling thread without a current error. Use the <code><a href="#catch_">catch_</a></code> member function template to handle specific errors (recognized by their type).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following convenient syntax is supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">if</span>( <span class="directive">auto</span> r=try_(f()) ) {
    <span class="comment">//Success, use r.get() to obtain the value returned by f()</span>
} <span class="keyword">else</span> {
    <span class="comment">//Handle error, see result::catch_&lt;&gt;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>result</code> template defines the following public members:</p>
</div>
<hr>
<div class="sect3">
<h4 id="result_dtor">result&lt;T&gt; destructor</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">~result() noexcept;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>At the time a <code>result&lt;T&gt;</code> object for which <code><a href="#result_has_unhandled_error">has_unhandled_error</a>()</code> is <code>true</code> is destroyed:</p>
<div class="ulist">
<ul>
<li>
<p>If <code><a href="#has_current_error">has_current_error</a>()</code> is also <code>true</code>, <code>result&lt;T&gt;</code> calls <code>std::terminate()</code>.</p>
</li>
<li>
<p>Otherwise the error contained in <code>*this</code> becomes the current error for the calling thread again.<br></p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise (<code>has_unhandled_error()</code> is <code>false</code>), if <code><a href="#result_has_error">has_error</a>()</code> is <code>true</code>, the captured error object is destroyed.</p>
</li>
<li>
<p>Otherwise the captured <code>T</code> value is destroyed.</p>
</li>
</ul>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_has_error">result&lt;T&gt;::has_error()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> has_error() <span class="directive">const</span> noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Returns: </dt>
<dd>
<p><code>true</code> if <code>*this</code> contains an error object, <code>false</code> if it contains a value.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_has_unhandled_error">result&lt;T&gt;::has_unhandled_error()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> has_unhandled_error() <span class="directive">const</span> noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Returns: </dt>
<dd>
<p><code>true</code> if <code>has_error()</code> and the error has not yet been handled, <code>false</code> otherwise.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The error contained in a <code>result</code> is marked as handled when <code><a href="#catch_">catch_</a>&lt;E&gt;</code> is called, but only if it can be converted to type <code>E</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_operator_bool">result&lt;T&gt;::operator bool()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">explicit</span> <span class="directive">operator</span> <span class="predefined-type">bool</span>() <span class="directive">const</span> noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Returns: </dt>
<dd>
<p>Equivalent to <code>return !<a href="#result_has_error">has_error</a>()</code>.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="catch_">result&lt;T&gt;::catch_()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">E</span>=std::exception&gt;
E * catch_() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Returns: </dt>
<dd>
<p>If <code><a href="#result_has_error">has_error</a>()</code> is <code>true</code> <em>and</em> the error object contained in <code>*this</code> is of type <code>E</code>, returns a pointer to that object; otherwise returns <code>0</code>. The returned pointer becomes invalid if the <code>result</code> object is moved or destroyed.</p>
</dd>
<dt class="hdlist1">Effects: </dt>
<dd>
<p>The error object captured into <code>*this</code> is marked as handled but only if it is of type <code>E</code>; see <code><a href="#result_dtor">~result</a>()</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>catch_&lt;&gt;</code> (using the default for <code>E</code>) serves similar function to <code>catch(...)</code> when handling exceptions, however in Noexcept any error object passed to <code>throw_</code> (even objects of built-in types) internally will have a <code>std::exception</code> component, so <code>catch_&lt;&gt;</code> is able to return a valid <code>std::exception</code> pointer regardless of the type passed to <code>throw_</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_throw_">result&lt;T&gt;::throw_()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">&lt;unspecified_return_type&gt; throw_() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Preconditions: </dt>
<dd>
<p><code><a href="#result_has_error">has_error</a></code>().</p>
</dd>
<dt class="hdlist1">Effects: </dt>
<dd>
<p>The error object stored into <code>*this</code> becomes the current error for the calling thread again.</p>
</dd>
<dt class="hdlist1">Returns: </dt>
<dd>
<p>An object of unspecified type which converts implicitly to any type for use in <code>return</code> expressions. Example usage:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">if</span>( <span class="directive">auto</span> r=try_(f()) ) {
    <span class="comment">//success, use r.get()</span>
} <span class="keyword">else</span> {
    <span class="comment">//possibly handle some errors, then:</span>
    <span class="keyword">return</span> r.throw_(); <span class="comment">//propagate the error object up the call chain</span>
}</code></pre>
</div>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_throw_exception">result&lt;T&gt;::throw_exception()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> throw_exception();</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Preconditions: </dt>
<dd>
<p><code>has_error()</code>.</p>
</dd>
<dt class="hdlist1">Effects: </dt>
<dd>
<p>Throws the error object as a C++ exception.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_get">result&lt;T&gt;::get()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">//Not available in result&lt;void&gt;:</span>
T <span class="directive">const</span> &amp; get() <span class="directive">const</span>;
T &amp; get();</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Effects: </dt>
<dd>
<p>If <code>!<a href="#result_has_error">has_error</a>()</code>, <code>get()</code> returns a reference to the object passed to <code><a href="#try_">try_</a></code> and moved into <code>*this</code>; otherwise <code>get()</code> calls <code><a href="#result_throw_exception">throw_exception</a>()</code>.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="result_try_">try_()</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="class">T</span>&gt;
result&lt;T&gt; try_( T &amp;&amp; res ) noexcept;

result&lt;<span class="directive">void</span>&gt; void_try_() noexcept;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Effects: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>If <code>!<a href="#has_current_error">has_current_error</a>()</code>, <code>res</code> is moved into the returned <code>result&lt;T&gt;</code> object, later accessible by a call to <code><a href="#result_get">get</a>()</code>.</p>
</li>
<li>
<p>Otherwise the current error for the calling thread is moved into the returned <code>result&lt;T&gt;</code> object, later accessible by a call to <code><a href="#catch_">catch_</a>()</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Postconditions: </dt>
<dd>
<p><code>!has_current_error()</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>result&lt;T&gt;</code> fully encapsulates the result (value or error) of the function call and has no association with the calling thread, so <code>result&lt;T&gt;</code> objects can be temporarily stored (e.g. in some <code>queue&lt; result&lt;T&gt; &gt;</code>) or moved to a different thread before their contents is consumed; see <a href="#programming_techniques">Programming techniques and guidelines</a> for an example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><br></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programming_techniques">Programming techniques and guidelines</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_selecting_optimal_function_return_types">Selecting optimal function return types</h3>
<div class="paragraph">
<p>Noexcept is able to propagate failures without imposing a specific function return type, which is important because sometimes failures need to be propagated through third-party functions whose return types are beyond our control.</p>
</div>
<div class="paragraph">
<p>When it is possible to take Noexcept into account in the design of function return value semantics, it is best to pick types that have a natural state (in the respective function domain) that can be used to detect failures without resorting to <code><a href="#has_current_error">has_current_error</a>()</code>. In this case Noexcept can stay completely out of the way, except when detected errors are being handled.</p>
</div>
<div class="paragraph">
<p>There are many function return types which usually fit this guideline quite naturally. Here are a few examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bool</code></p>
</li>
<li>
<p><code>T *</code> (notably <code>FILE *</code>)</p>
</li>
<li>
<p><code>shared_ptr&lt;T&gt;</code></p>
</li>
<li>
<p><code>unique_ptr&lt;T&gt;</code></p>
</li>
<li>
<p><code>optional&lt;T&gt;</code></p>
</li>
<li>
<p><code>ifstream</code></p>
</li>
<li>
<p><code>HANDLE</code> (Windows system objects)</p>
</li>
<li>
<p><code>int</code> and any integral type (-1 is invalid count, length, magnitude, size, width, height, file descriptor, etc.)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>shared_ptr&lt;T&gt;</code> deserves special mentioning here because the possibility to use custom deleters make it extremely deployable as the return value from any factory function which allocates any type of resource.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Other types that have an empty state may require more careful consideration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>string</code></p>
</li>
<li>
<p><code>vector&lt;T&gt;</code> (and any other container type)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Case in point, <code>string</code> works great with functions that return a file name or user name because these may not be empty. When an empty <code>string</code> is a valid return value, requiring the caller to use <code>has_current_error()</code> to check for error is usually the best choice, but sometimes it might make sense to use a wrapper, e.g. <code>optional&lt;string&gt;</code> or <code>shared_ptr&lt;vector&lt;T&gt; &gt;</code>.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_enforcing_successful_control_flow">Enforcing successful control flow</h3>
<div class="paragraph">
<p>Consider the following declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">std::vector&lt;std::<span class="predefined-type">string</span>&gt; read_file( FILE * f ) noexcept;
<span class="predefined-type">int</span> count_words( std::vector&lt;std::<span class="predefined-type">string</span>&gt; <span class="directive">const</span> &amp; lines ) noexcept;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>count_words</code> function is designed to take as input the result returned by <code>read_file</code>, yet in a calling function we can not use function composition and simply say:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> count_words_in_file( FILE * f ) noexcept {
    <span class="keyword">return</span> count_words( read_file(f) );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s because we must check if <code>read_file</code> was successful.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Specifically, we need to be able to tell the difference between <code>read_file</code> returning an empty <code>vector</code> (using <code><a href="#throw_">throw_</a></code>) because it failed to read the file, and it returning an empty <code>vector</code> because the file was empty.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In terms of Noexcept, we could use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> count_words_in_file( FILE * f ) noexcept {
    <span class="keyword">if</span>( <span class="directive">auto</span> r = try_( read_file(f) ) )
        <span class="keyword">return</span> count_words( r.get() );
    <span class="keyword">else</span>
        <span class="keyword">return</span> r.throw_();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is not too bad: at least errors are pushed out of the way, and we don&#8217;t have to worry about how to propagate all possible errors up the call chain. Still, requiring users to check for errors every time they call <code>read_file</code> is prone to errors&#8201;&#8212;&#8201;and in this case it is particularly annoying, since <code>count_words</code> and <code>read_file</code> fit so well together.</p>
</div>
<div class="paragraph">
<p>Using Noexcept we can do better: we can have functions like <code>count_words</code> check for errors themselves. That&#8217;s because error-neutral contexts can propagate errors up the call stack using <code>return <a href="#throw_">throw_</a>()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">if</span>( has_current_error() )
    <span class="keyword">return</span> throw_();</code></pre>
</div>
</div>
<div class="paragraph">
<p>For convenience, this handy <code>if</code> statement&#8201;&#8212;&#8201;surrounded by <code>{</code> <code>}</code>&#8201;&#8212;&#8201;is provided as the <code>BOOST_NOEXCEPT_CHECK</code> macro, which allows us to define <code>count_words</code> as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> count_words( std::vector&lt;std::<span class="predefined-type">string</span>&gt; <span class="directive">const</span> &amp; lines ) noexcept {
    BOOST_NOEXCEPT_CHECK
    <span class="comment">//No errors, continue with counting words.</span>
    ....
    <span class="keyword">return</span> n; <span class="comment">//the number of words in lines</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In turn, this allows the calling <code>count_words_in_file</code> function to safely use simple function composition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> count_words_in_file( FILE * f ) noexcept {
    <span class="keyword">return</span> count_words( read_file(f) );
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The macro <code>BOOST_NOEXCEPT_CHECK_VOID</code> can be used similarly in <code>void</code> functions.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_automatically_returning_early_in_case_of_a_failure_in_a_sequence_of_function_calls">Automatically returning early in case of a failure in a sequence of function calls</h3>
<div class="paragraph">
<p>As demonstrated above, the <code>BOOST_NOEXCEPT_CHECK</code>  macro can be used to automate error checking when using function composition (calling one function with the result of another, as in <code>f(g())</code>.</p>
</div>
<div class="paragraph">
<p>While <code>void</code> function calls can not be composed, the <code>BOOST_NOEXCEPT_CHECK_VOID</code> macro could be used in a similar manner:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> f1() noexcept {
    BOOST_NOEXCEPT_CHECK_VOID
    ....
    <span class="keyword">if</span>( !f1_succeeds )
        <span class="keyword">return</span> (<span class="directive">void</span>) throw_( error1() );
}

<span class="directive">void</span> f2() noexcept {
    BOOST_NOEXCEPT_CHECK_VOID
    ....
    <span class="keyword">if</span>( !f2_succeeds )
        <span class="keyword">return</span> (<span class="directive">void</span>) throw_( error2() );
}

<span class="directive">void</span> f3() noexcept {
    BOOST_NOEXCEPT_CHECK_VOID
    ....
    <span class="keyword">if</span>( !f3_succeeds )
        <span class="keyword">return</span> (<span class="directive">void</span>) throw_( error3() );
}

<span class="directive">void</span> caller() noexcept {
    <span class="comment">//No need to check for errors here, since f1, f2 and f3 each check for errors:</span>
    f1();
    f2();
    f3();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works, but as is the case when using function composition with non-<code>void</code> functions, all 3 functions will be called, even though they would return immediately in case the previous one failed.</p>
</div>
<div class="paragraph">
<p>Can Noexcept help avoid calling <code>f2</code> or <code>f3</code> if <code>f1</code> fails? Yes it can, though we must refactor the <code>void</code> functions to return <code>bool</code> (indicating success or failure) which is a good idea anyway for any <code>void</code> function which could fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> f1() noexcept {
    BOOST_NOEXCEPT_CHECK
    ....
    <span class="keyword">if</span>( f1_succeeds )
        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( error1() );
}

<span class="predefined-type">bool</span> f2() noexcept {
    BOOST_NOEXCEPT_CHECK
    ....
    <span class="keyword">if</span>( f2_succeeds )
        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( error2() );
}

<span class="predefined-type">bool</span> f3() noexcept {
    BOOST_NOEXCEPT_CHECK
    ....
    <span class="keyword">if</span>( f3_succeeds )
        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_( error3() );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this change, the <code>caller</code> function can simply use <code>operator &amp;&amp;</code> to both propagate errors from any of <code>f1</code>, <code>f2</code> or <code>f3</code> <em>and</em> return early if any of them fails:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> caller() noexcept {
    <span class="keyword">return</span>
        f1() &amp;&amp;
        f2() &amp;&amp;
        f3();
}</code></pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_obtaining_diagnostic_information_from_unknown_errors">Obtaining diagnostic information from unknown errors</h3>
<div class="paragraph">
<p>Noexcept is compatible with <code><a href="http://www.boost.org/doc/libs/release/libs/exception/doc/diagnostic_information.html">boost::diagnostic_information</a>()</code> without being coupled with it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>boost::diagnostic_information</code> does not require exception handling.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One possible use case is to print diagnostic information about unhandled errors that reach the <code>main</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> main() {
    <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(do_work(....)) ) {
        <span class="keyword">return</span> <span class="integer">0</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;error1&gt;() ) {
        <span class="comment">//print an error message about error1, then return to the OS</span>
        <span class="keyword">return</span> <span class="integer">1</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;error2&gt;() ) {
        <span class="comment">//print an error message about error2, then return to the OS</span>
        <span class="keyword">return</span> <span class="integer">2</span>;
    } <span class="keyword">else</span> {
        <span class="comment">//Unknown error!</span>
        <span class="directive">auto</span> err=r.catch_&lt;&gt;();
        assert(err!=<span class="integer">0</span>); <span class="comment">//catch_&lt;&gt; will bind any error type</span>
        std::cerr &lt;&lt;
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Unhandled error reached main!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Diagnostic information follows:</span><span class="char">\n</span><span class="delimiter">&quot;</span></span> &lt;&lt;
            boost::diagnostic_information(*err);
        <span class="keyword">return</span> <span class="integer">3</span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling <code>boost::diagnostic_information</code> will probe the passed object and extract as much useful information as possible. This includes the location the error was reported (if available: file, line number, function name), the output from <code>std::exception::what()</code>, as well as any <code>boost::exception</code>-style error info. An example output may look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>test/diagnostic_information_test.cpp(26): Throw in function int f1()
Dynamic exception type: boost::noexcept_::noexcept_detail::class_dispatch&lt;my_error, true, false&gt;::type
std::exception::what: my_error
[answer_*] = 42</pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_augmenting_error_objects_in_error_neutral_contexts">Augmenting error objects in error-neutral contexts</h3>
<div class="paragraph">
<p>Consider the following error type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">class</span> <span class="class">file_read_error</span> {
  std::<span class="predefined-type">string</span> fn_;
  <span class="directive">public</span>:
  <span class="directive">explicit</span> file_read_error( std::<span class="predefined-type">string</span> &amp;&amp; fn ) noexcept:
    fn_(std::move(fn)) { }
  std::<span class="predefined-type">string</span> <span class="directive">const</span> &amp; file_name() <span class="directive">const</span> noexcept { <span class="keyword">return</span> fn_; }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>A call to <code><a href="#catch_">catch_</a></code> that handles <code>file_read_error</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">if</span>( <span class="directive">auto</span> e=r.catch_&lt;file_read_error&gt;() ) {
  std::cerr &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Error reading </span><span class="char">\&quot;</span><span class="delimiter">&quot;</span></span> &lt;&lt; e-&gt;file_name() &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="char">\&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, a function that may report a <code>file_read_error</code> using Noexcept:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> read_file(FILE * f) noexcept {
  ....
  size_t nr=fread(buf,<span class="integer">1</span>,count,f);
  <span class="keyword">if</span>(ferror(f))
    <span class="keyword">return</span> throw_(file_read_error(<span class="string"><span class="delimiter">&quot;</span><span class="content">???</span><span class="delimiter">&quot;</span></span>)); <span class="comment">//File name not available here!</span>
  ....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The issue is that the <code>catch_</code> needs a file name, but at the point of the <code>throw_</code> a file name is not available (only a <code>FILE</code> pointer is). In general the error might be detected in a library which can not assume that a meaningful name is available for any <code>FILE</code> it reads, even if a program that uses the library could reasonably make the same assumption.</p>
</div>
<div class="paragraph">
<p>Using <code><a href="http://www.boost.org/doc/libs/release/libs/exception/doc/error_info.html">boost::error_info</a></code> a file name may be added to any error after it has been passed to <code>throw_</code>, while anything available at the point of the <code>throw_</code> (e.g. <code>errno</code>) may be stored in the original object​:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">class</span> <span class="class">file_io_error</span>: <span class="directive">public</span> boost::exception { };
<span class="keyword">class</span> <span class="class">file_open_error</span>: <span class="directive">public</span> <span class="directive">virtual</span> file_io_error { };
<span class="keyword">class</span> <span class="class">file_read_error</span>: <span class="directive">public</span> <span class="directive">virtual</span> file_io_error { };
<span class="keyword">typedef</span> boost::error_info&lt;<span class="keyword">struct</span> xi_file_name_,std::<span class="predefined-type">string</span>&gt; xi_file_name;
<span class="keyword">typedef</span> boost::error_info&lt;<span class="keyword">struct</span> xi_errno_,<span class="predefined-type">int</span>&gt; xi_errno;

<span class="directive">using</span> <span class="keyword">namespace</span> boost::noexcept_;

<span class="predefined-type">bool</span> read_file(FILE * f) noexcept {
    ....
    size_t nr=fread(buf,<span class="integer">1</span>,count,f);
    <span class="keyword">if</span>(ferror(f))
        <span class="keyword">return</span> throw_( file_read_error() &lt;&lt; xi_errno(errno) );
    ....
}

<span class="predefined-type">bool</span> process_file(<span class="predefined-type">char</span> <span class="directive">const</span> * name) noexcept {
    <span class="keyword">if</span>( FILE * fp=fopen(name,<span class="string"><span class="delimiter">&quot;</span><span class="content">rt</span><span class="delimiter">&quot;</span></span>) ) {
        std::shared_ptr&lt;FILE&gt; f(fp,fclose);

        <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(read_file(fp)) ) {
            <span class="comment">//success!</span>
            <span class="keyword">return</span> <span class="predefined-constant">true</span>;
        } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;boost::exception&gt;() ) {
            <span class="comment">//Augment any passing error:</span>
            (*err) &lt;&lt; xi_file_name(name);
            <span class="keyword">return</span> r.throw_();
        }

    } <span class="keyword">else</span> {

        <span class="comment">//report failure to open the file:</span>
        <span class="keyword">return</span> throw_( file_open_error() &lt;&lt; xi_file_name(name) );

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the final <code>catch_</code> may look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">bool</span> do_work() noexcept {
    <span class="keyword">return</span> process_file(<span class="string"><span class="delimiter">&quot;</span><span class="content">file.txt</span><span class="delimiter">&quot;</span></span>);
}

<span class="predefined-type">int</span> main() {
    <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(do_work()) ) {

        std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Success!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
        <span class="keyword">return</span> <span class="integer">0</span>;

    } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;file_io_error&gt; {

        std::cerr &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">I/O error!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
        std::<span class="predefined-type">string</span> <span class="directive">const</span> * fn=boost::get_error_info&lt;xi_file_name&gt;();
        assert(fn!=<span class="integer">0</span>); <span class="comment">//In this program all files have names.</span>
        std::cerr &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">File name: </span><span class="delimiter">&quot;</span></span> &lt;&lt; *fn &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
        <span class="keyword">return</span> <span class="integer">1</span>;

    } <span class="keyword">else</span> {

        <span class="comment">//Unknown error!</span>
        <span class="directive">auto</span> err=r.catch_&lt;&gt;();
        assert(err!=<span class="integer">0</span>); <span class="comment">//catch_&lt;&gt; will bind any error type</span>
        std::cerr &lt;&lt;
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Unhandled error reached main!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Diagnostic information follows:</span><span class="char">\n</span><span class="delimiter">&quot;</span></span> &lt;&lt;
            boost::diagnostic_information(*err);
        <span class="keyword">return</span> <span class="integer">2</span>;

    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>boost::error_info</code> does not require exception handling. Noexcept is not coupled with <code>boost::error_info</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="example_threads">Passing "value-or-error" between threads using <code>result&lt;T&gt;</code></h3>
<div class="paragraph">
<p>The usual Noexcept error handling semantics (<a href="#throw_">throw_</a>, <a href="#try_">try_</a>, <a href="#catch_">catch_</a>) are a poor match for use cases where the value (or the error) can not be consumed immediately, for example when it is produced asynchronously in a worker thread, or when values are temporarily stored into a queue for later consumption, in which case the queue must have the ability to hold multiple outstanding errors.</p>
</div>
<div class="paragraph">
<p>The <code>result&lt;T&gt;</code> class template is designed for use in such cases. For example, suppose we have this function which simulates a computation which may succeed or fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="predefined-type">int</span> compute() noexcept {
    <span class="keyword">if</span>( rand()%<span class="integer">2</span> )
        <span class="keyword">return</span> <span class="integer">42</span>;
    <span class="keyword">else</span>
        <span class="keyword">return</span> throw_(compute_error());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As usual, it uses <code><a href="#throw_">throw_</a></code> to report failures. Using <code>std::future&lt;result&lt;int&gt; &gt;</code> to collect the results from many concurrent calls to <code>compute</code> is easy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">std::vector&lt;std::future&lt;result&lt;<span class="predefined-type">int</span>&gt; &gt; &gt; fut;

<span class="comment">//Create and launch 100 tasks:</span>
std::generate_n( std::inserter(fut,fut.end()), <span class="integer">100</span>, [ ] {
    <span class="comment">//Call compute() and capture the result with into a result&lt;int&gt;:</span>
    std::packaged_task&lt;result&lt;<span class="predefined-type">int</span>&gt;()&gt; task( [ ] {
        <span class="keyword">return</span> try_(compute());
    } );

    <span class="comment">//Get the future and kick off the task</span>
    <span class="directive">auto</span> f=task.get_future();
    std::thread(std::move(task)).detach();
    <span class="keyword">return</span> f;
} );</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can now <code>wait</code> on each future then pass the collected <code>result</code> object to <code><a href="#result_try_">try_</a></code> to either get the successfully computed value or the failure, now transported into the main thread:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">for</span>( <span class="directive">auto</span> &amp; f:fut ) {
    f.wait();
    <span class="keyword">if</span>( <span class="directive">auto</span> r=try_(f.get()) )
        std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Success! Answer=</span><span class="delimiter">&quot;</span></span> &lt;&lt; r.get() &lt;&lt; <span class="char">'\n'</span>;
    <span class="keyword">else</span> <span class="keyword">if</span>( <span class="directive">auto</span> err=r.catch_&lt;compute_error&gt;() )
        std::cout &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Failure!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><br></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">Macros and configuration</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_ASSERT</pre>
</div>
</div>
<div class="paragraph">
<p>All assertions in Noexcept use this macro; if not <code>#defined</code>, Noexcept header files <code>#define</code> it as <a href="http://www.boost.org/doc/libs/release/libs/assert/assert.html"><code>BOOST_ASSERT</code></a>.</p>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_USE_BOOST_TSS</pre>
</div>
</div>
<div class="paragraph">
<p>By default, Noexcept uses the standard <code>thread_local</code> macro for thread-local storage. If <code>BOOST_NOEXCEPT_USE_BOOST_TSS</code> is <code>#defined</code>, Noexcept uses <a href="http://www.boost.org/doc/libs/release/doc/html/thread/thread_local_storage.html"><code>boost::thread_specific_ptr</code></a> instead.</p>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_NO_THREADS</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>#defined</code>, Noexcept assumes that static storage is equivalent to thread-local storage.</p>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_NO_RTTI</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>#defined</code>, Noexcept will not use <code>dynamic_cast</code> (and errors bound by <code><a href="#catch_">catch_&lt;T&gt;</a>()</code> must match <code>T</code> exactly).</p>
</div>
<div class="paragraph">
<p>If <code>BOOST_NOEXCEPT_NO_RTTI</code> is not explicitly <code>#defined</code>, the availability of RTTI is determined using <code>BOOST_NO_RTTI</code>.</p>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_THROW_EXCEPTION</pre>
</div>
</div>
<div class="paragraph">
<p>All Noexcept functions are declared as <code>noexcept</code>, except for <code><a href="#result_get">result::get</a>()</code> which throws exceptions using this macro. If not <code>#defined</code>, Noexcept header files <code>#define</code> it as <a href="http://www.boost.org/doc/libs/release/libs/exception/doc/BOOST_THROW_EXCEPTION.html"><code>BOOST_THROW_EXCEPTION</code></a>.</p>
</div>
<hr>
<div class="listingblock">
<div class="content">
<pre>BOOST_NOEXCEPT_NO_EXCEPTION_INFO</pre>
</div>
</div>
<div class="paragraph">
<p>While Noexcept is not coupled with <code>boost::error_info</code>, by default it is coupled with a tiny part of Boost which is needed to make <code>boost::error_info</code> work if used. Defining this macro removes that dependency.</p>
</div>
<div class="paragraph">
<p><br></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="alternatives">Alternatives to Noexcept</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Besides Noexcept, there are multiple other C++ libraries and proposals for solving the problem of error reporting without using exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/viboes/std-make/blob/master/doc/proposal/expected/d0323r2.md">D0323R2</a> by Vicente J. Botet Escriba proposes a class template <code>expected&lt;T,E&gt;</code>, designed to be used as a return type in functions that could fail, the general idea being that in case of success the function returns a result of type <code>T</code>, or else it returns a reason for the failure, of type <code>E</code>.</p>
</li>
<li>
<p><a href="https://github.com/pdimov/variant2">variant2</a> by Peter Dimov is a never-valueless implementation of <code>std::variant</code> and an extended version of <code>expected&lt;T,E&gt;</code>. The class <code>boost::variant2::expected&lt;T,E&#8230;&#8203;&gt;</code> represents the return type of an operation that may potentially fail. It contains either the expected result of type <code>T</code>, or a reason for the failure, of one of the error types in <code>E&#8230;&#8203;</code> (internally, this is stored as <code>variant&lt;T,E&#8230;&#8203;&gt;</code>).</p>
</li>
<li>
<p><a href="https://ned14.github.io/outcome/">Outcome</a> by Niall Douglas recently underwent a formal Boost review. Unlike <code>expected&lt;T,E&gt;</code> and <code>expected&lt;T,E&#8230;&#8203;&gt;</code>, in <code>outcome&lt;T&gt;</code> the error is either of type <code>std::error_code</code> or an exception object, transported as a <code>std::exception_ptr</code>. The motivation for this more restrictive interface is to force the user to "be a good citizen" and communicate <code>noexcept</code> failures in terms of <code>std::error_code</code>, in order to facilitate interoperability between different libraries (with the added ability to capture exceptions in case some lower level library throws).</p>
</li>
<li>
<p><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0262r1.html">P0262</a> by Lawrence Crowl and Chris Mysen proposes a control helper called <code>status_value&lt;Status,Value&gt;</code>, which differs from all of the above libraries in that the returning function is expected to always provide a status <em>and</em> a value. This can be useful to communicate conditions which did not lead to a failure but are still likely to be of interest to the caller.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table summarizes the key differences between the different error handling libraries; see <a href="#design_rationale">Design rationale</a> to understand the motivation for the Noexcept design:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Comparison between error handling libraries</caption>
<colgroup>
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle"></th>
<th class="tableblock halign-center valign-middle">1</th>
<th class="tableblock halign-center valign-middle">2</th>
<th class="tableblock halign-center valign-middle">3</th>
<th class="tableblock halign-center valign-middle">4</th>
<th class="tableblock halign-center valign-middle">5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Requires specific return type in functions that could potentially fail</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_FILE">no</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Functions must enumerate the possible error types</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">not possible</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>std::error_code</code> supported</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_FILE">yes</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">User-defined error types supported</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_lua">yes</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes (dynamic allocation)</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Errors may be reported from C callbacks</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_lua">yes</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Reported errors may cross programming language boundaries</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_lua">yes</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Errors may be moved to a different thread</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_thread">yes</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Strict value-or-error semantics</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><a href="#example_optional">optional</a></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">yes</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">no</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Noexcept</p>
</li>
<li>
<p><code>expected&lt;T,E&gt;</code></p>
</li>
<li>
<p><code>expected&lt;T,E&#8230;&#8203;&gt;</code></p>
</li>
<li>
<p><code>outcome&lt;T&gt;</code></p>
</li>
<li>
<p><code>status_value&lt;Status,Value&gt;</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Noexcept was inspired by the discussions on the Boost Developers mailing list during the review of the <a href="https://ned14.github.io/outcome/">Outcome</a> library by Niall Douglas.</p>
</div>
<div class="paragraph">
<p>This second evolution of Noexcept incorporates valuable positive and negative feedback received after Noexcept was announced. Special thanks to Bjorn Reese and Peter Dimov for pointing out the previous inability of Noexcept to capture results into a <code>result&lt;T&gt;</code> with a hard value-or-error invariant, to Gavin Lambert for helping me discover that that <code>throw_()</code> <em>was</em> broken, and to Andrzej Krzemienski whose criticisms lead to improvements in the Noexcept mechanisms for writing error-neutral functions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="qanda">Q&amp;A</h2>
<div class="sectionbody">
<div class="qlist qanda">
<ol>
<li>
<p><em>Does Noexcept allocate memory dynamically?</em></p>
<p>No.</p>
</li>
<li>
<p><em>Does Noexcept require RTTI?</em></p>
<p>No.</p>
</li>
<li>
<p><em>When using exception handling, there can be multiple active exception objects in each thread. Does Noexcept support multiple active errors?</em></p>
<p>Yes, the current error object can be captured using <code><a href="#try_">try_</a></code>, at which point the calling thread is left without a current error.</p>
<div class="paragraph">
<p>However, it is up to the user to call <code>try_</code>: the code below is ill-formed, assuming that both function calls may fail&#8201;&#8212;&#8201;that is, return using <code><a href="#throw_">throw_</a>(my_error())</code>, for some user-defined type <code>my_error</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>auto r1=f1();
auto r2=f2();</pre>
</div>
</div>
<div class="paragraph">
<p>The correct code would ensure that at the time <code>f2()</code> is called there is no current error for the calling thread. This could be achieved either by checking the return value of <code>f1()</code> (assuming <code>r1</code> converts to <code>bool</code> to indicate success or failure):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>if( auto r1=f1() ) {
    auto r2=f2(); //okay for f2 to fail (f1 didn't)
    ....
} else {
    return r1.throw_(); //let the caller deal with failures
}</pre>
</div>
</div>
<div class="paragraph">
<p>or by capturing <code>f1</code> failures using <code>try_</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>auto r1=try_(f1()); //capture possible f1 failures
auto r2=f2(); //okay, even if both f1 and f2 fail</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above is not unlike when using exception handling: if you want to call <code>f2</code> even if <code>f1</code> throws, you&#8217;d have to call <code>f1</code> from within a <code>try</code>/<code>catch</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>(Nothrow asserts on <code>!<a href="#has_current_error">has_current_error</a>()</code> at the time an error object is passed to <code><a href="#throw_">throw_</a></code>).</p>
</div>
</li>
<li>
<p><em>Does this mean that I should always use <code>try_</code>?</em></p>
<p>No, only use <code>try_</code> if you want to handle errors (see <code><a href="#catch_">catch_</a></code>). In error-neutral contexts, in case of errors simply return <code><a href="#throw_">throw_</a>()</code> without argument:</p>
<div class="literalblock">
<div class="content">
<pre>if( auto r=f() ) {
    //Success -- use r
} else {
    return r.throw_(); //Something went wrong
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above assumes that <code>r</code> converts to <code>bool</code> to indicate success or failure (there are many types than can be used this way). If that is not the case, ideally you would still be able to inspect the returned value to detect failures. If that is also not possible, use <code>has_current_error()</code>.</p>
</div>
</li>
<li>
<p><em>What happens if I forget to check for errors?</em></p>
<p>Then you&#8217;d be using a bad value. For example, if a function returns a <code>shared_ptr&lt;T&gt;</code> and you forget to check for success, attempting to dereference it leads to undefined behavior (segfault).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If control is entering a scope where exception handling is enabled, you can convert Noexcept errors to exceptions by <code>try_(f()).get()</code>, which throws on error.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>That said, it is sometimes possible to get away with not checking for errors in error-neutral contexts, see <a href="#programming_techniques">Programming techniques and guidelines</a>.</p>
</div>
</li>
<li>
<p><em>What happens if <code><a href="#try_">try_</a></code> is called without any error being present?</em></p>
<p>That is fine, in this case the value passed to <code>try_</code> will simply be moved into the returned <code><a href="#try_">result</a></code> object, where it can be accessed using the <code><a href="#result_get">get</a>()</code> member function.</p>
</li>
<li>
<p><em>Has Noexcept been benchmarked?</em></p>
<p>Not yet, but performance is an important design goal in Noexcept and I welcome any data or analysis contributions. That said, except in functions that handle errors (see <code><a href="#try_">try_</a></code>), Noexcept has no effect on the speed of passing return values up the call chain.</p>
</li>
<li>
<p><em>Doesn&#8217;t Noexcept make it too easy to forget to check for errors? For example, if a function that may fail returns a type without explicit empty state (like <code>int</code>), there is nothing to protect the user from ignoring errors by mistake!</em></p>
<p>Noexcept does protect the user from this type of mistakes, but it can&#8217;t do it on the spot; see the <a href="#guarantee">No error gets ignored guarantee</a>.</p>
<div class="paragraph">
<p>If this does not suffice, don&#8217;t write functions that return <code>int</code> to indicate success or failure. However, consider that wrapping the <code>int</code> in a user-defined type adds complexity which may or may not be appropriate.</p>
</div>
</li>
<li>
<p><em>Passing errors through thread-local storage doesn&#8217;t work if the consumption of the result of a function call (success or error) can not be consumed immediately. What if I need to postpone that until later?</em></p>
<p>The <code><a href="#try_">result&lt;T&gt;</a></code> template solves this exact problem. See <a href="#programming_techniques">Programming techniques and guidelines</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_download">Download</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/zajo/boost-noexcept" class="bare">https://github.com/zajo/boost-noexcept</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_installation">Building and installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Noexcept is a header-only library and requires no building or installation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_the_unit_tests_and_the_examples">Building the unit tests and the examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The unit tests and the examples can be built within the Boost framework: clone Noexcept under the <code>libs</code> subdirectory in your boost installation, then <code>cd</code> into <code>noexcept/test</code> and execute <code>b2</code> as usual.</p>
</div>
<div class="paragraph">
<p>Alternatively, they can be built using <a href="http://mesonbuild.com">Meson</a>. In this case, both Boost and Lua (needed for one of the examples) will be downloaded automatically under the <code>subprojects</code> directory. Use <code>mesonconf</code> to select the build configuration (multiple build options are available).</p>
</div>
<div class="paragraph">
<p><br></p>
</div>
<div class="paragraph">
<p><span class="small"><em>&#169; 2017 Emil Dotchevski</em></span></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>